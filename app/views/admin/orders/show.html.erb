<div class="container mt-4">

  <h2 class="mb-4">注文履歴詳細</h2>

  <!-- 注文情報 -->
  <table class="table table-bordered mb-4">
    <tbody>
      <tr>
        <th style="width: 25%">購入日時</th>
        <td><%= @order.created_at.strftime("%Y/%m/%d %H:%M") %></td>
      </tr>
      <tr>
        <th>注文者</th>
        <td><%= @order.customer.name %></td>
      </tr>
      <tr>
        <th>配送先</th>
        <td>
          〒<%= @order.postal_code %><br>
          <%= @order.address %><br>
          <%= @order.name %>
        </td>
      </tr>
      <tr>
        <th>支払方法</th>
        <td><%= @order.payment_method_i18n %></td>
      </tr>
      <tr>
        <th>注文ステータス</th>
        <td><%= @order.status_i18n %></td>
      </tr>
    </tbody>
  </table>

  <!-- 注文商品一覧 -->
  <table class="table table-bordered">
    <thead class="table-light">
      <tr>
        <th>商品名</th>
        <th>単価（税込）</th>
        <th>数量</th>
        <th>小計</th>
      </tr>
    </thead>

    <tbody>
      <% @order_details.each do |detail| %>
        <tr>
          <td><%= detail.item.name %></td>
          <td><%= number_with_delimiter(detail.price) %> 円</td>
          <td><%= detail.amount %></td>
          <td>
            <%= number_with_delimiter(detail.price * detail.amount) %> 円
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <!-- 金額 -->
  <table class="table table-bordered mt-4">
    <tbody>
      <tr>
        <th>商品合計</th>
        <td>
          <%= number_with_delimiter(
                @order.billing_amount - @order.postage
              ) %> 円
        </td>
      </tr>
      <tr>
        <th>送料</th>
        <td><%= number_with_delimiter(@order.postage) %> 円</td>
      </tr>
      <tr>
        <th>請求金額</th>
        <td><%= number_with_delimiter(@order.billing_amount) %> 円</td>
      </tr>
    </tbody>
  </table>

</div>
